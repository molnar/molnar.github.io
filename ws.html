<html>
    <head>
      <meta charset="utf-8" />
      <title>Display a basemap layer with labels</title>
      <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no" />
      <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" crossorigin="" />
      <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js" crossorigin=""></script>
  
      <!-- Load Esri Leaflet from CDN -->
      <script src="https://unpkg.com/esri-leaflet@^3.0.9/dist/esri-leaflet.js"></script>
  
      <!-- Load Esri Leaflet Vector from CDN -->
      <script src="https://unpkg.com/esri-leaflet-vector@4.0.0/dist/esri-leaflet-vector.js" crossorigin=""></script>
      <style>
        html,
        body,
        #map {
          padding: 0;
          margin: 0;
          height: 100%;
          width: 100%;
          font-family: Arial, Helvetica, sans-serif;
          font-size: 14px;
          color: #323232;
        }
      </style>
    </head>
    <body>
      <div id="map"></div>
      <script>
        const apiKey = "AAPK2b935e8bbf564ef581ca3c6fcaa5f2a71ZH84cPqqFvyz3KplFRHP8HyAwJJkh6cnpcQ-qkWh5aiyDQsGJbsXglGx0QM2cPm";
  
        const map = L.map("map").setView([36.140518, -80.303732], 19);
  
        L.esri.Vector.vectorBasemapLayer("ArcGIS:Imagery", {
          apikey: apiKey
        }).addTo(map);

        var parcelLayer = L.esri.featureLayer({
            url: 'https://services1.arcgis.com/5Yf8nIJWE7cxpd3N/arcgis/rest/services/Parcels_Hosted/FeatureServer/0/',
            style: (feature) => {
                return {
                    color: "white",
                    fillOpacity: 0
                };
            }
        }).addTo(map);

        var streetLayer = L.esri.featureLayer({
            url: 'https://services1.arcgis.com/5Yf8nIJWE7cxpd3N/arcgis/rest/services/Streets_Hosted/FeatureServer/0/',
            style: (feature) => {
                return {
                    color: "red"
                };
            }
        }).addTo(map);

        var easementLayer = L.esri.featureLayer({
            url: 'https://terraweb.co.forsyth.nc.us/arcgis/rest/services/Tax/TPV_Main/MapServer/14/',
            style: (feature) => {
                return {                    
                    fillColor: "grey"
                };
            }
        }).addTo(map);

        function showPosition(position) {
            console.log("c",position)
          map.setView([position.coords.latitude, position.coords.longitude], 14);
        }

        function getLocation() {
            console.log("here")
          if (navigator.geolocation) {
              console.log("a")
              navigator.geolocation.getCurrentPosition(showPosition);
          } else {
            console.log("b")
              alert("Geolocation is not supported by this browser.");
          }
        }
        getLocation();
          
        var pnts = {"type":"FeatureCollection","crs":{"type":"name","properties":{"name":"EPSG:2264"}},"features":[{"type":"Feature","id":1,"geometry":{"type":"Point","coordinates":[1614875.8116000146,872258.6850000024,0]},"properties":{"OBJECTID":1,"ORIG_FID":1}},{"type":"Feature","id":2,"geometry":{"type":"Point","coordinates":[1614931.9365000129,872259.774300009,0]},"properties":{"OBJECTID":2,"ORIG_FID":2}},{"type":"Feature","id":3,"geometry":{"type":"Point","coordinates":[1614802.2200000137,872261.9217000008,0]},"properties":{"OBJECTID":3,"ORIG_FID":3}},{"type":"Feature","id":4,"geometry":{"type":"Point","coordinates":[1615026.14760001,872266.8652000129,0]},"properties":{"OBJECTID":4,"ORIG_FID":4}},{"type":"Feature","id":5,"geometry":{"type":"Point","coordinates":[1614765.5069999993,872293.2924000174,0]},"properties":{"OBJECTID":5,"ORIG_FID":5}},{"type":"Feature","id":6,"geometry":{"type":"Point","coordinates":[1614984.1509999186,872298.9195237309,0]},"properties":{"OBJECTID":6,"ORIG_FID":6}},{"type":"Feature","id":7,"geometry":{"type":"Point","coordinates":[1614877.5444000065,872297.8639000058,0]},"properties":{"OBJECTID":7,"ORIG_FID":7}},{"type":"Feature","id":8,"geometry":{"type":"Point","coordinates":[1615107.4937774688,872319.0386612564,0]},"properties":{"OBJECTID":8,"ORIG_FID":8}},{"type":"Feature","id":9,"geometry":{"type":"Point","coordinates":[1615232.9919579923,872330.2360218465,0]},"properties":{"OBJECTID":9,"ORIG_FID":9}},{"type":"Feature","id":10,"geometry":{"type":"Point","coordinates":[1615237.6165000051,872430.256099999,0]},"properties":{"OBJECTID":10,"ORIG_FID":10}},{"type":"Feature","id":11,"geometry":{"type":"Point","coordinates":[1614769.0184347332,872447.9121288508,0]},"properties":{"OBJECTID":11,"ORIG_FID":11}},{"type":"Feature","id":12,"geometry":{"type":"Point","coordinates":[1614771.3080638498,872524.3578481525,0]},"properties":{"OBJECTID":12,"ORIG_FID":12}},{"type":"Feature","id":13,"geometry":{"type":"Point","coordinates":[1614862.5600000173,872527.5900000185,0]},"properties":{"OBJECTID":13,"ORIG_FID":13}},{"type":"Feature","id":14,"geometry":{"type":"Point","coordinates":[1614942.750000015,872530.3700000346,0]},"properties":{"OBJECTID":14,"ORIG_FID":14}},{"type":"Feature","id":15,"geometry":{"type":"Point","coordinates":[1614972.480000019,872531.849999994,0]},"properties":{"OBJECTID":15,"ORIG_FID":15}},{"type":"Feature","id":16,"geometry":{"type":"Point","coordinates":[1615106.9200000018,872537.1899999976,0]},"properties":{"OBJECTID":16,"ORIG_FID":16}},{"type":"Feature","id":17,"geometry":{"type":"Point","coordinates":[1615241.1637000144,872542.311800018,0]},"properties":{"OBJECTID":17,"ORIG_FID":17}},{"type":"Feature","id":18,"geometry":{"type":"Point","coordinates":[1615039.2900000215,872546.8800000101,0]},"properties":{"OBJECTID":18,"ORIG_FID":18}},{"type":"Feature","id":19,"geometry":{"type":"Point","coordinates":[1614772.0053109974,872547.6374088377,0]},"properties":{"OBJECTID":19,"ORIG_FID":19}},{"type":"Feature","id":20,"geometry":{"type":"Point","coordinates":[1614996.2200000286,872553.0000000149,0]},"properties":{"OBJECTID":20,"ORIG_FID":20}},{"type":"Feature","id":21,"geometry":{"type":"Point","coordinates":[1614944.8199999928,872560.5100000054,0]},"properties":{"OBJECTID":21,"ORIG_FID":21}},{"type":"Feature","id":22,"geometry":{"type":"Point","coordinates":[1615266.7071000338,872582.4392000139,0]},"properties":{"OBJECTID":22,"ORIG_FID":22}},{"type":"Feature","id":23,"geometry":{"type":"Point","coordinates":[1615351.670600012,872719.3872000128,0]},"properties":{"OBJECTID":23,"ORIG_FID":23}},{"type":"Feature","id":24,"geometry":{"type":"Point","coordinates":[1615376.3842000067,872746.4391000122,0]},"properties":{"OBJECTID":24,"ORIG_FID":24}},{"type":"Feature","id":25,"geometry":{"type":"Point","coordinates":[1615377.4501903355,872762.2289170921,0]},"properties":{"OBJECTID":25,"ORIG_FID":25}},{"type":"Feature","id":26,"geometry":{"type":"Point","coordinates":[1614777.3089464456,872767.3403181732,0]},"properties":{"OBJECTID":26,"ORIG_FID":26}},{"type":"Feature","id":27,"geometry":{"type":"Point","coordinates":[1615202.830595106,872812.8850817382,0]},"properties":{"OBJECTID":27,"ORIG_FID":27}},{"type":"Feature","id":28,"geometry":{"type":"Point","coordinates":[1615168.8414518833,872833.9756724834,0]},"properties":{"OBJECTID":28,"ORIG_FID":28}},{"type":"Feature","id":29,"geometry":{"type":"Point","coordinates":[1615207.2305000275,872841.5214000046,0]},"properties":{"OBJECTID":29,"ORIG_FID":29}},{"type":"Feature","id":30,"geometry":{"type":"Point","coordinates":[1615228.9019711465,872855.549860552,0]},"properties":{"OBJECTID":30,"ORIG_FID":30}},{"type":"Feature","id":31,"geometry":{"type":"Point","coordinates":[1614779.5517999977,872965.7441000044,0]},"properties":{"OBJECTID":31,"ORIG_FID":31}},{"type":"Feature","id":32,"geometry":{"type":"Point","coordinates":[1615303.0274000168,873011.1633999944,0]},"properties":{"OBJECTID":32,"ORIG_FID":32}},{"type":"Feature","id":33,"geometry":{"type":"Point","coordinates":[1614783.94660002,873038.558799997,0]},"properties":{"OBJECTID":33,"ORIG_FID":33}},{"type":"Feature","id":34,"geometry":{"type":"Point","coordinates":[1614783.092600003,873072.7832000107,0]},"properties":{"OBJECTID":34,"ORIG_FID":34}}]}  

      </script>
    </body>
  </html>
